# ctrld configuration file
# Generated by ctrld Configuration Manager
# Template: Split-Horizon DNS Configuration

[service]
    log_level = "info"
    cache_enable = true
    cache_size = 8192

[network.0]
    name = "Internal Network"
    cidrs = ["192.168.0.0/16", "10.0.0.0/8"]

[upstream.0]
    name = "Internal DNS"
    endpoint = "10.0.0.1"
    type = "legacy"
    timeout = 3000

[upstream.1]
    name = "External DoH"
    endpoint = "https://cloudflare-dns.com/dns-query"
    type = "doh"
    timeout = 5000
    bootstrap_ip = "1.1.1.1"

[listener.0]
    ip = "127.0.0.1"
    port = 53

[listener.0.policy]
    name = "Split DNS Policy"
    rules = [
        {"*.local" = ["upstream.0"]},
        {"*.internal" = ["upstream.0"]},
        {"company.com" = ["upstream.0"]},
    ]