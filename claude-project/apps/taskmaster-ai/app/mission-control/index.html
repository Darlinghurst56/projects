<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskMaster Mission Control</title>
    <link rel="stylesheet" href="/app/web/css/common.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Custom animations */
        @keyframes pulse-success {
            0%, 100% { background-color: #10b981; }
            50% { background-color: #059669; }
        }
        .pulse-success {
            animation: pulse-success 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -468px 0; }
            100% { background-position: 468px 0; }
        }
        .shimmer {
            background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
            background-size: 400% 100%;
            animation: shimmer 1.5s infinite;
        }

        /* Mobile-friendly touch targets */
        .touch-target {
            min-height: 44px;
            min-width: 44px;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <h1 class="text-xl font-semibold">Mission Control</h1>
                </div>
                
                <!-- System Status Indicator -->
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div id="system-status" class="w-3 h-3 bg-green-400 rounded-full pulse-success"></div>
                        <span class="text-sm">System Online</span>
                    </div>
                    <button id="refresh-btn" class="touch-target p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <!-- Quick Actions Bar -->
        <div class="mb-6">
            <div class="flex flex-wrap gap-3">
                <button id="create-task-btn" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors touch-target">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Create Task
                </button>
                <button id="agent-overview-btn" class="inline-flex items-center px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors touch-target">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    Agent Status
                </button>
                <button id="task-board-btn" class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors touch-target">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"></path>
                    </svg>
                    Task Board
                </button>
                <button id="system-health-btn" class="inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors touch-target">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    System Health
                </button>
            </div>
        </div>

        <!-- 3-Column Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <!-- Left Panel: Quick Actions & Agent Status -->
            <div class="lg:col-span-3 space-y-6">
                <!-- Agent Status Cards -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                    <div class="p-4 border-b border-slate-200">
                        <h2 class="text-lg font-semibold text-slate-900">Agent Status</h2>
                    </div>
                    <div id="agent-status-list" class="p-4 space-y-3">
                        <!-- Agent cards will be dynamically loaded here -->
                        <div class="shimmer h-16 rounded-lg"></div>
                        <div class="shimmer h-16 rounded-lg"></div>
                        <div class="shimmer h-16 rounded-lg"></div>
                    </div>
                </div>

                <!-- System Metrics -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                    <div class="p-4 border-b border-slate-200">
                        <h2 class="text-lg font-semibold text-slate-900">System Metrics</h2>
                    </div>
                    <div class="p-4 space-y-4">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-slate-600">Active Tasks</span>
                            <span id="active-tasks-count" class="text-xl font-semibold text-blue-600">-</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-slate-600">Agents Online</span>
                            <span id="agents-online-count" class="text-xl font-semibold text-green-600">-</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-slate-600">Tasks Today</span>
                            <span id="tasks-today-count" class="text-xl font-semibold text-slate-600">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Center Panel: Task Workflow -->
            <div class="lg:col-span-6">
                <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                    <div class="p-4 border-b border-slate-200">
                        <h2 class="text-lg font-semibold text-slate-900">Task Workflow</h2>
                    </div>
                    <div id="task-workflow" class="p-4">
                        <!-- Task board will be rendered here -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="bg-slate-50 rounded-lg p-3">
                                <h3 class="font-medium text-slate-700 mb-3">Pending</h3>
                                <div id="pending-tasks" class="space-y-2">
                                    <div class="shimmer h-20 rounded-lg"></div>
                                </div>
                            </div>
                            <div class="bg-blue-50 rounded-lg p-3">
                                <h3 class="font-medium text-blue-700 mb-3">In Progress</h3>
                                <div id="in-progress-tasks" class="space-y-2">
                                    <div class="shimmer h-20 rounded-lg"></div>
                                </div>
                            </div>
                            <div class="bg-orange-50 rounded-lg p-3">
                                <h3 class="font-medium text-orange-700 mb-3">Review</h3>
                                <div id="review-tasks" class="space-y-2">
                                    <!-- Tasks will be loaded here -->
                                </div>
                            </div>
                            <div class="bg-green-50 rounded-lg p-3">
                                <h3 class="font-medium text-green-700 mb-3">Done</h3>
                                <div id="done-tasks" class="space-y-2">
                                    <div class="shimmer h-20 rounded-lg"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Activity & System Health -->
            <div class="lg:col-span-3 space-y-6">
                <!-- Recent Activity -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                    <div class="p-4 border-b border-slate-200">
                        <h2 class="text-lg font-semibold text-slate-900">Recent Activity</h2>
                    </div>
                    <div id="recent-activity" class="p-4 space-y-3 max-h-64 overflow-y-auto">
                        <!-- Activity items will be loaded here -->
                        <div class="shimmer h-12 rounded-lg"></div>
                        <div class="shimmer h-12 rounded-lg"></div>
                        <div class="shimmer h-12 rounded-lg"></div>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                    <div class="p-4 border-b border-slate-200">
                        <h2 class="text-lg font-semibold text-slate-900">Quick Access</h2>
                    </div>
                    <div class="p-4 space-y-2">
                        <a href="/developer-interface/web/debug.html" class="block p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors text-sm">
                            🔧 Debug Interface
                        </a>
                        <a href="/api/health" class="block p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors text-sm">
                            ❤️ API Health Check
                        </a>
                        <a href="/agent-management/" class="block p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors text-sm">
                            👥 Agent Management
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Create Task Modal (Hidden by default) -->
    <div id="create-task-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-y-auto">
                <div class="p-6 border-b border-slate-200">
                    <h3 class="text-lg font-semibold text-slate-900">Create New Task</h3>
                </div>
                <form id="create-task-form" class="p-6 space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">Task Description</label>
                        <textarea id="task-description" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" rows="3" placeholder="Describe what needs to be done..."></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">Priority</label>
                        <select id="task-priority" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="low">Low Priority</option>
                            <option value="medium" selected>Medium Priority</option>
                            <option value="high">High Priority</option>
                            <option value="urgent">Urgent</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">Suggested Agent</label>
                        <select id="suggested-agent" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Auto-assign based on task type</option>
                            <option value="frontend-agent">Frontend Agent</option>
                            <option value="backend-agent">Backend Agent</option>
                            <option value="qa-specialist">QA Specialist</option>
                            <option value="orchestrator-agent">Orchestrator</option>
                            <option value="documentation-agent">Documentation Agent</option>
                        </select>
                    </div>
                </form>
                <div class="p-6 border-t border-slate-200 flex justify-end space-x-3">
                    <button id="cancel-task-btn" class="px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors touch-target">Cancel</button>
                    <button id="submit-task-btn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors touch-target">Create Task</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="mission-control.js"></script>
    <script src="/app/web/components/navigation.js"></script>
</body>
</html>